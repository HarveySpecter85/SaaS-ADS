---
phase: 04-prompt-generation
plan: 02
type: execute
depends_on: ["04-01"]
files_modified: [src/app/(dashboard)/campaigns/page.tsx, src/app/(dashboard)/campaigns/[id]/page.tsx, src/app/(dashboard)/campaigns/[id]/client.tsx, src/app/(dashboard)/campaigns/new/page.tsx, src/components/campaign-card.tsx, src/components/prompt-card.tsx]
---

<objective>
Create campaign management UI with goal selection, prompt preview, and batch generation.

Purpose: Enable users to create goal-based campaigns, preview sample prompts, and generate full batches.
Output: Campaign list page, campaign profile with prompt grid, and campaign creation flow.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-prompt-generation/04-CONTEXT.md
@.planning/phases/04-prompt-generation/04-01-SUMMARY.md
@.planning/phases/03-asset-anchoring/03-02-SUMMARY.md

**From CONTEXT.md - Vision:**
- Goal-based templates: awareness, lead gen, conversion
- Preview before generation — see sample prompts before full batch
- 50+ variations per generation batch

**From CONTEXT.md - Essential:**
- Volume with variety (50+ genuinely different)
- Brand consistency (on-brand colors, tone)
- Product fidelity (anchored by hero images)

**Patterns established (from Phase 2-3):**
- Server Component for initial data fetch, Client Component for interactivity
- Visual-first design: large visual elements dominate
- Card component pattern (BrandCard, ProductCard)
- Grid layout (3 columns on desktop)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create campaign list page and card component</name>
  <files>src/app/(dashboard)/campaigns/page.tsx, src/components/campaign-card.tsx</files>
  <action>
1. Create src/components/campaign-card.tsx:

A card component that shows campaign preview:
- Campaign name as title
- Goal badge (Awareness/Lead Gen/Conversion) with color coding:
  - Awareness: blue
  - Lead Gen: green
  - Conversion: orange
- Product name as subtitle
- Prompt count: "52 prompts" or "Draft" if 0
- Status indicator (draft/generating/complete)
- Click to navigate to /campaigns/[id]

Style: Match Linear aesthetic. White card, subtle shadow, hover state.

2. Create src/app/(dashboard)/campaigns/page.tsx:

Page that lists all campaigns:
- Header: "Campaigns" with "New Campaign" button (links to /campaigns/new)
- Grid of CampaignCard components (3 columns on desktop)
- Empty state: "No campaigns yet. Create a campaign to start generating ad creatives."
- Fetch campaigns from /api/campaigns

Server Component that fetches data directly from Supabase (better performance than API for reads).
  </action>
  <verify>npm run build succeeds, page renders at /campaigns</verify>
  <done>Campaign list page shows all campaigns as cards with goal badges and prompt counts</done>
</task>

<task type="auto">
  <name>Task 2: Create campaign profile page with prompt preview</name>
  <files>src/app/(dashboard)/campaigns/[id]/page.tsx, src/app/(dashboard)/campaigns/[id]/client.tsx, src/components/prompt-card.tsx</files>
  <action>
1. Create src/components/prompt-card.tsx:

Prompt preview card:
- Headline (large, bold)
- Description (body text)
- CTA button preview (styled like actual button)
- Variation type badge
- "Preview" badge if is_preview=true
- Expand to see full prompt_text (for image generation)

Style: Clean card with clear hierarchy. Headline dominates.

2. Create src/app/(dashboard)/campaigns/[id]/page.tsx (Server Component):

Fetches campaign with prompts, renders CampaignProfileClient.

3. Create src/app/(dashboard)/campaigns/[id]/client.tsx (Client Component):

**Header section:**
- Campaign name (editable inline)
- Goal badge (visual indicator)
- Product link (to /products/[product_id])
- Status badge
- Back link to /campaigns

**Preview section (when status='draft'):**
- "Preview Prompts" button → generates 3 sample prompts
- Shows preview prompts in grid
- "Regenerate Preview" button to try different samples
- "Generate Full Batch" button → generates 50+ prompts

**Prompts section (when status='complete'):**
- "Prompts (52)" header with regenerate option
- PromptCard grid (2-3 columns)
- Filter by variation_type (tabs or dropdown)
- Copy prompt button on each card

**Generation in progress (when status='generating'):**
- Loading spinner
- "Generating prompts..." message
- Auto-refresh when complete

Design: Visual-first. Prompts are the focus. Goal and product context visible but secondary.
  </action>
  <verify>npm run build succeeds, page renders at /campaigns/[id]</verify>
  <done>Campaign profile displays prompts in visual grid, preview/generate workflow works</done>
</task>

<task type="auto">
  <name>Task 3: Create campaign creation page</name>
  <files>src/app/(dashboard)/campaigns/new/page.tsx</files>
  <action>
Create src/app/(dashboard)/campaigns/new/page.tsx:

Page to create new campaign:
- Header: "New Campaign"
- Step 1: Select Product (dropdown or card selection)
  - Show product with hero image thumbnail
  - Fetch products from /api/products
- Step 2: Select Goal
  - Three large cards for Awareness/Lead Gen/Conversion
  - Each with icon and brief description:
    - Awareness: "Build brand recognition and emotional connection"
    - Lead Gen: "Capture interest and generate qualified leads"
    - Conversion: "Drive immediate action and sales"
- Step 3: Name Campaign (optional)
  - Auto-generated default: "{Product Name} - {Goal} Campaign"
  - Editable text field
- Submit button: "Create Campaign"
- On success: redirect to /campaigns/[id] where preview happens

Flow:
1. User selects product (required)
2. User selects goal (required)
3. User optionally customizes name
4. POST to /api/campaigns
5. Redirect to campaign profile for preview generation

Style:
- Wizard-style with clear steps
- Goal cards should be visually distinct and inviting
- Client Component for form handling
  </action>
  <verify>npm run build succeeds, page renders at /campaigns/new</verify>
  <done>Create campaign page with product selection, goal selection, redirects to profile</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] /campaigns page lists campaigns with goal badges
- [ ] /campaigns/[id] shows prompts and allows generation
- [ ] /campaigns/new allows creating campaigns with goal selection
- [ ] Preview generation workflow works
- [ ] No TypeScript or ESLint errors
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Campaigns displayed with goal-based visual treatment
- Preview → Full Generation workflow is smooth
- Prompts displayed clearly with headline/description/CTA
- Phase 4 complete
</success_criteria>

<output>
After completion, create `.planning/phases/04-prompt-generation/04-02-SUMMARY.md`

Commit guidance:
- Task 1: `feat(04-02): create campaign list page and card component`
- Task 2: `feat(04-02): create campaign profile page with prompt preview`
- Task 3: `feat(04-02): create campaign creation page`
- Metadata: `docs(04-02): complete prompt generation UI plan`

Note: This is the final plan for Phase 4. After SUMMARY.md, update ROADMAP.md and STATE.md to mark Phase 4 complete.
</output>
