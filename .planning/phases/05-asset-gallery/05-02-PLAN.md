---
phase: 05-asset-gallery
plan: 02
type: execute
depends_on: ["05-01"]
files_modified: [src/app/(dashboard)/gallery/page.tsx, src/app/(dashboard)/gallery/client.tsx, src/components/asset-card.tsx, src/components/campaign-section.tsx]
---

<objective>
Create the asset gallery UI with Figma-style organization and filtering.

Purpose: Enable users to browse all generated assets organized by campaign, with filters for quick discovery.
Output: Gallery page with campaign sections, asset cards, and filtering capabilities.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-asset-gallery/05-CONTEXT.md
@.planning/phases/05-asset-gallery/05-01-SUMMARY.md

**From CONTEXT.md - Vision:**
- Figma-style canvas organization: assets grouped in frames/sections by campaign
- Visual-first browsing, not a data table
- Quick filtering by campaign, product, goal

**Patterns established (from Phase 2-4):**
- Server Component for initial data fetch, Client Component for interactivity
- Visual-first design: large visual elements dominate
- Card component pattern (BrandCard, ProductCard, CampaignCard)
- Grid layout (3 columns on desktop, responsive)
- Linear aesthetic: white cards, subtle shadows, hover states

**From 05-01 (assets available):**
- Asset type with image_url, width, height, format, platform
- Assets linked to campaigns and prompts
- API: GET /api/assets?campaign_id=x
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create asset card and campaign section components</name>
  <files>src/components/asset-card.tsx, src/components/campaign-section.tsx</files>
  <action>
1. Create src/components/asset-card.tsx:

Asset preview card that shows:
- Image thumbnail (large, visual focus)
- Hover overlay with:
  - Dimensions (1200x628)
  - Format badge (PNG/JPG/WEBP)
  - Platform badge if set (Google Ads/Meta/TikTok)
- Click to expand/lightbox (handled by parent)
- Checkbox for selection (export workflow)

Style: Image-first. Minimal chrome. Thumbnail dominates. Subtle rounded corners.
Hover: Show info overlay. Slight scale up.

2. Create src/components/campaign-section.tsx:

Figma-style frame/section for a campaign's assets:
- Campaign name as section header (large, bold)
- Goal badge (Awareness/Lead Gen/Conversion with color coding)
- Product name as subtitle
- Asset count (e.g., "52 assets")
- Grid of AssetCard components inside
- Collapsible (click header to collapse/expand)
- "Generate More" button if campaign has prompts without assets

Style: Clear section boundary. White background. Subtle top border or left accent.
Layout: Full-width section containing 4-column asset grid.
  </action>
  <verify>npm run build succeeds, components render without errors</verify>
  <done>AssetCard shows image with hover info, CampaignSection groups assets by campaign</done>
</task>

<task type="auto">
  <name>Task 2: Create gallery page with filtering</name>
  <files>src/app/(dashboard)/gallery/page.tsx, src/app/(dashboard)/gallery/client.tsx</files>
  <action>
1. Create src/app/(dashboard)/gallery/page.tsx (Server Component):

Fetches all campaigns with their assets, renders GalleryClient.

```typescript
// Fetch campaigns that have assets (status='complete' campaigns)
// Include asset counts per campaign
// Pass to client component
```

2. Create src/app/(dashboard)/gallery/client.tsx (Client Component):

**Header section:**
- "Asset Gallery" title
- Total asset count
- Filter controls (see below)

**Filter bar:**
- Campaign dropdown (filter by specific campaign)
- Goal filter (Awareness/Lead Gen/Conversion tabs or pills)
- Product dropdown (filter by product)
- Search box (search by prompt headline/description)
- "Clear filters" link when filters active

**Gallery body (Figma-style):**
- CampaignSection components stacked vertically
- Each section shows one campaign's assets
- Empty state: "No assets yet. Generate assets from your campaigns."
- Link to /campaigns if no campaigns exist

**Selection mode:**
- Floating action bar appears when assets selected
- Shows: "{N} selected" + "Export" button + "Clear selection"
- Export button opens export modal (Plan 03)

Design:
- Clean white background for the page
- Each CampaignSection is a distinct visual block
- Generous spacing between sections
- Filters stick to top on scroll (sticky)
  </action>
  <verify>npm run build succeeds, page renders at /gallery</verify>
  <done>Gallery page displays assets grouped by campaign with working filters</done>
</task>

<task type="auto">
  <name>Task 3: Add asset lightbox and selection</name>
  <files>src/app/(dashboard)/gallery/client.tsx</files>
  <action>
Update GalleryClient to add:

**Lightbox modal:**
- Click asset to open full-size view
- Show full image at actual dimensions
- Display metadata: dimensions, format, platform, prompt headline/description
- Navigation arrows for prev/next within same campaign
- Keyboard navigation (arrow keys, Escape to close)
- Click outside or X to close

**Selection behavior:**
- Click checkbox on asset card to select
- Shift+click to select range
- Selected assets have visual highlight (blue border or overlay)
- Selection persists across filter changes
- "Select all in campaign" option in CampaignSection header

**Selection state:**
- Track selected asset IDs in state
- Pass selection state to floating action bar
- Selection count updates in real-time

Style:
- Lightbox has dark backdrop
- Image centered with generous padding
- Metadata panel below or beside image
- Selected cards have clear visual distinction
  </action>
  <verify>npm run build succeeds, lightbox opens on click, selection works</verify>
  <done>Assets can be viewed in lightbox and selected for export</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] /gallery page displays campaigns with assets
- [ ] Filtering works (by campaign, goal, product)
- [ ] Asset lightbox opens and closes correctly
- [ ] Selection mode works with floating action bar
- [ ] No TypeScript or ESLint errors
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Figma-style campaign sections display assets
- Filters narrow down visible assets
- Lightbox shows full asset with metadata
- Selection enables multi-asset actions
- Ready for Export Workflow (Plan 03)
</success_criteria>

<output>
After completion, create `.planning/phases/05-asset-gallery/05-02-SUMMARY.md`

Commit guidance:
- Task 1: `feat(05-02): create asset card and campaign section components`
- Task 2: `feat(05-02): create gallery page with filtering`
- Task 3: `feat(05-02): add asset lightbox and selection`
- Metadata: `docs(05-02): complete asset gallery UI plan`
</output>
