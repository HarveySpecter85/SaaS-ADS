---
phase: 02-brand-ingestion
plan: 03
type: execute
depends_on: ["02-01"]
files_modified: [src/app/(dashboard)/brands/page.tsx, src/app/(dashboard)/brands/[id]/page.tsx, src/app/(dashboard)/brands/new/page.tsx, src/components/brand-card.tsx, src/components/color-swatch.tsx, src/components/brand-editor.tsx]
---

<objective>
Create brand listing and profile pages with visual-first design.

Purpose: Enable users to view and edit brand data with big color swatches and font previews.
Output: Brand list page, brand profile page with visual display, inline editing.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-brand-ingestion/02-CONTEXT.md
@.planning/phases/02-brand-ingestion/02-01-SUMMARY.md

**From CONTEXT.md - Vision:**
- Visual-first: big color swatches, font previews
- Profile page should feel like looking at the brand, not reading about it
- Easy editing is essential

**From CONTEXT.md - Essential:**
- When something is wrong or missing, correcting it is effortless

**Patterns established (from Phase 1):**
- Fixed sidebar layout pattern
- Module card display pattern
- Linear-style aesthetic
- Route groups for dashboard
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create brand list page and card component</name>
  <files>src/app/(dashboard)/brands/page.tsx, src/components/brand-card.tsx</files>
  <action>
1. Create src/components/brand-card.tsx:

A card component that shows brand preview:
- Brand name as title
- First 3 colors as small swatches in a row
- Primary font name
- Number of items: "4 colors · 2 fonts"
- Click to navigate to /brands/[id]

Style: Match Linear aesthetic from Phase 1. White card, subtle shadow, hover state.

2. Create src/app/(dashboard)/brands/page.tsx:

Page that lists all brands:
- Header: "Brands" with "Upload New" button (links to /brands/new)
- Grid of BrandCard components (3 columns on desktop)
- Empty state: "No brands yet. Upload brand guidelines to get started."
- Fetch brands from /api/brands

Server Component that fetches data. Use Supabase server client directly (don't go through API for reads - better performance).

Keep navigation simple - clicking card goes to brand detail.
  </action>
  <verify>npm run build succeeds, page renders at /brands</verify>
  <done>Brand list page shows all brands as cards, empty state works</done>
</task>

<task type="auto">
  <name>Task 2: Create brand profile page with visual swatches</name>
  <files>src/app/(dashboard)/brands/[id]/page.tsx, src/components/color-swatch.tsx, src/components/brand-editor.tsx</files>
  <action>
1. Create src/components/color-swatch.tsx:

Large color swatch component:
- Big square (h-24 w-24 or similar) showing the color
- Hex code displayed below
- Name and usage as labels
- Primary indicator (small badge)
- Edit button (pencil icon) - triggers edit mode
- Delete button (x icon) - removes color

Make the color dominate - this is visual-first design.

2. Create src/components/brand-editor.tsx:

Inline editor component for brand data:
- Used for editing colors, fonts, tone items
- Simple form that appears in place of display
- Save/Cancel buttons
- For colors: hex input with color picker, name, usage, is_primary checkbox
- For fonts: font family, weight, usage, is_primary
- For tone: descriptor, example textarea

Use Client Component for interactivity. Call PATCH /api/brands/[id] on save.

3. Create src/app/(dashboard)/brands/[id]/page.tsx:

Brand profile page with three sections:

**Header:**
- Brand name (editable)
- Description (editable)
- "Download PDF" link if source_pdf_url exists
- Back link to /brands

**Colors Section:**
- "Colors" header with "Add Color" button
- Grid of ColorSwatch components (4-5 per row)
- Each swatch is ~100px square showing the actual color
- Click to edit inline

**Fonts Section:**
- "Fonts" header with "Add Font" button
- Font preview cards showing the font family name
- Styled text preview "The quick brown fox..." in that font (use Google Fonts or fallback)
- Weight and usage as metadata

**Tone Section:**
- "Tone of Voice" header with "Add" button
- Cards with descriptor as title, example as body text
- Simple layout, content-focused

Server Component for initial load, Client Components for edit interactions.
Use React state for edit mode toggles.
  </action>
  <verify>npm run build succeeds, page renders at /brands/[id]</verify>
  <done>Brand profile page displays colors as big swatches, fonts with previews, tone with descriptors</done>
</task>

<task type="auto">
  <name>Task 3: Create brand upload page</name>
  <files>src/app/(dashboard)/brands/new/page.tsx</files>
  <action>
Create src/app/(dashboard)/brands/new/page.tsx:

Upload page for new brands:
- Header: "Upload Brand Guidelines"
- Large drop zone for PDF upload (drag & drop + click to browse)
- Accept only .pdf files
- On upload:
  1. Show loading state "Extracting brand data..."
  2. POST to /api/brands/upload with FormData
  3. On success: redirect to /brands/[id] to see extracted data
  4. On error: show error message, allow retry

Style:
- Center the drop zone
- Dashed border, light background
- Icon (document/upload icon)
- "Drop PDF here or click to browse"
- Loading spinner during extraction

Client Component for file handling and upload state.

After successful upload, the user lands on the brand profile page where they can immediately edit any incorrect extractions. This fulfills the "easy editing" requirement.
  </action>
  <verify>npm run build succeeds, page renders at /brands/new</verify>
  <done>Upload page accepts PDF, shows loading state, redirects to brand profile on success</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] /brands page lists brands
- [ ] /brands/[id] shows brand with visual swatches
- [ ] /brands/new allows PDF upload
- [ ] Colors display as large colored squares
- [ ] Inline editing works for colors/fonts/tone
- [ ] No TypeScript or ESLint errors
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Brand data displayed visually (swatches, not just text)
- Easy editing via inline forms
- Upload workflow: PDF → loading → profile page
- Phase 2 complete
</success_criteria>

<output>
After completion, create `.planning/phases/02-brand-ingestion/02-03-SUMMARY.md`

Commit guidance:
- Task 1: `feat(02-03): create brand list page and card component`
- Task 2: `feat(02-03): create brand profile page with visual swatches`
- Task 3: `feat(02-03): create brand upload page`
- Metadata: `docs(02-03): complete brand UI plan`

Note: This is the final plan for Phase 2. After SUMMARY.md, update ROADMAP.md and STATE.md to mark Phase 2 complete.
</output>
